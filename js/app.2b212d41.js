(function(){var t={1002:function(t,e,s){"use strict";var a=s(2856),i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("WeatherForecast")],1)},r=[],n=(s(8111),s(1701),function(){var t=this,e=t._self._c;return e("div",{staticClass:"weather-container"},[t.showCacheStatus?e("div",{staticClass:"cache-status"},[t.isUsingCache?e("span",[t._v("🔄 显示缓存数据 ("+t._s(t.cacheAge)+"分钟前)")]):e("span",[t._v("✅ 实时数据")]),e("button",{on:{click:t.refreshData}},[t._v("刷新")])]):t._e(),e("div",{staticClass:"weather-header"},[e("h2",[t._v("天気予報")]),e("div",{staticClass:"location-selector"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedLocation,expression:"selectedLocation"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedLocation=e.target.multiple?s:s[0]},t.fetchWeatherData]}},t._l(t.locations,(function(s){return e("option",{key:s.id,domProps:{value:s.id}},[t._v(t._s(s.name))])})),0)])]),e("div",{staticClass:"weather-content"},[t.isLoading?e("div",{staticClass:"skeleton-container"},[e("div",{staticClass:"skeleton-card"},[e("div",{staticClass:"skeleton-header"}),t._m(0),e("div",{staticClass:"skeleton-details"},t._l(t.skeletonCount,(function(t){return e("div",{key:"detail-"+t,staticClass:"skeleton-details-item"})})),0)]),t._m(1)]):t._e(),t.isLoading?e("div",{staticClass:"loading-overlay"},[e("div",{staticClass:"loading-spinner"})]):[t.currentWeather?e("div",{staticClass:"current-weather"},[e("div",{staticClass:"location-info"},[e("h3",[t._v(t._s(t.currentWeather.name))]),e("p",{staticClass:"update-time"},[t._v("更新時間:"+t._s(t.formatTime(t.currentWeather.dt))+" ")])]),e("div",{staticClass:"weather-main"},[e("div",{staticClass:"temperature-section"},[e("div",{staticClass:"temperature"},[e("span",{staticClass:"temp"},[t._v(t._s(Math.round(t.currentWeather.main.temp)))]),e("span",{staticClass:"unit"},[t._v("°C")])]),e("div",{staticClass:"feels-like"},[t._v(" 体感温度:"+t._s(Math.round(t.currentWeather.main.feels_like))+"°C ")]),e("div",{staticClass:"temp-range"},[e("span",{staticClass:"max"},[t._v("↑"+t._s(Math.round(t.currentWeather.main.temp_max))+"°")]),e("span",{staticClass:"min"},[t._v("↓"+t._s(Math.round(t.currentWeather.main.temp_min))+"°")])])]),e("div",{staticClass:"weather-icon-section"},[e("img",{attrs:{src:t.getWeatherIcon(t.currentWeather.weather[0].icon),alt:"Weather icon"}}),e("p",{staticClass:"description"},[t._v(t._s(t.currentWeather.weather[0].description))])])]),e("div",{staticClass:"weather-details"},[e("div",{staticClass:"detail-card"},[e("div",{staticClass:"detail-icon"},[t._v("💧")]),e("div",{staticClass:"detail-content"},[e("div",{staticClass:"detail-label"},[t._v("湿度")]),e("div",{staticClass:"detail-value"},[t._v(t._s(t.currentWeather.main.humidity)+"%")])])]),e("div",{staticClass:"detail-card"},[e("div",{staticClass:"detail-icon"},[t._v("🌬️")]),e("div",{staticClass:"detail-content"},[e("div",{staticClass:"detail-label"},[t._v("風速")]),e("div",{staticClass:"detail-value"},[t._v(t._s(t.currentWeather.wind.speed)+" m/s "),e("span",{staticClass:"wind-direction",style:{transform:`rotate(${t.currentWeather.wind.deg}deg)`}},[t._v("↑")])])])]),e("div",{staticClass:"detail-card"},[e("div",{staticClass:"detail-icon"},[t._v("📊")]),e("div",{staticClass:"detail-content"},[e("div",{staticClass:"detail-label"},[t._v("気圧")]),e("div",{staticClass:"detail-value"},[t._v(t._s(t.currentWeather.main.pressure)+" hPa")])])]),e("div",{staticClass:"detail-card"},[e("div",{staticClass:"detail-icon"},[t._v("👁️")]),e("div",{staticClass:"detail-content"},[e("div",{staticClass:"detail-label"},[t._v("視程")]),e("div",{staticClass:"detail-value"},[t._v(t._s((t.currentWeather.visibility/1e3).toFixed(1))+" km")])])]),t.currentWeather.rain?e("div",{staticClass:"detail-card"},[e("div",{staticClass:"detail-icon"},[t._v("🌧️")]),e("div",{staticClass:"detail-content"},[e("div",{staticClass:"detail-label"},[t._v("降水量")]),e("div",{staticClass:"detail-value"},[t._v(t._s(t.currentWeather.rain["1h"])+" mm/h")])])]):t._e(),e("div",{staticClass:"detail-card"},[e("div",{staticClass:"detail-icon"},[t._v("☁️")]),e("div",{staticClass:"detail-content"},[e("div",{staticClass:"detail-label"},[t._v("雲量")]),e("div",{staticClass:"detail-value"},[t._v(t._s(t.currentWeather.clouds.all)+" %")])])]),e("div",{staticClass:"detail-card"},[e("div",{staticClass:"detail-icon"},[t._v("🌅")]),e("div",{staticClass:"detail-content"},[e("div",{staticClass:"detail-label"},[t._v("日の出")]),e("div",{staticClass:"detail-value"},[t._v(t._s(t.formatTime(t.currentWeather.sys.sunrise,"HH:mm")))])])]),e("div",{staticClass:"detail-card"},[e("div",{staticClass:"detail-icon"},[t._v("🌇")]),e("div",{staticClass:"detail-content"},[e("div",{staticClass:"detail-label"},[t._v("日の入")]),e("div",{staticClass:"detail-value"},[t._v(t._s(t.formatTime(t.currentWeather.sys.sunset,"HH:mm")))])])])])]):t._e(),t.hourlyForecast.length>0?e("div",{staticClass:"hourly-forecast"},[e("h3",[t._v("24時間予報")]),e("div",{staticClass:"hourly-items"},t._l(t.hourlyForecast,(function(s,a){return e("div",{key:a,staticClass:"hourly-item"},[e("div",{staticClass:"hour"},[t._v(t._s(t.formatTime(s.dt,"HH:mm")))]),e("div",{staticClass:"hourly-icon"},[e("img",{attrs:{src:t.getWeatherIcon(s.weather[0].icon),alt:"Weather icon"}}),e("p",{staticClass:"description"},[t._v(t._s(s.weather[0].description))])]),e("div",{staticClass:"hourly-temp"},[t._v(t._s(Math.round(s.main.temp))+"°")]),s.pop>0?e("div",{staticClass:"hourly-pop"},[e("span",{staticClass:"pop-value"},[t._v(t._s(Math.round(100*s.pop))+"%")])]):t._e()])})),0)]):t._e()]],2)])}),o=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"skeleton-main"},[e("div",{staticClass:"skeleton-main-temp"}),e("div",{staticClass:"skeleton-main-icon"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"skeleton-card"},[e("div",{staticClass:"skeleton-header",staticStyle:{width:"30%"}}),e("div",{staticClass:"skeleton-forecast"})])}],c=s(417);const l=c.A.create({baseURL:"https://api.openweathermap.org/data/2.5",timeout:1e4,params:{units:"metric",lang:"ja",appid:"15ead3f536ac68f9a1fd4b4c549bda78"}}),d={retries:3,retryDelay:1e3,retryOn:[500,502,503,504,429]};l.interceptors.request.use((t=>t),(t=>Promise.reject(t))),l.interceptors.response.use((t=>t),(async t=>{const{config:e,response:s}=t;if(!e||!d.retries||"get"!==e.method)return Promise.reject(t);const a=d.retryOn.includes(s?.status);if(!a)return Promise.reject(t);if(e.__retryCount=e.__retryCount||0,e.__retryCount>=d.retries)return Promise.reject(t);e.__retryCount+=1;const i=new Promise((t=>{setTimeout((()=>{t()}),d.retryDelay*e.__retryCount)}));return i.then((()=>l(e)))}));var u=l,h=s(9412),m=s.n(h);s(2489),s(7588);const v="weather_",j=10;var f={get(t){const e=`${v}${t}`,s=localStorage.getItem(e);if(!s)return null;try{const e=JSON.parse(s);return Date.now()>e.timestamp+1e3*e.expires?(this.remove(t),null):e.data}catch(a){return this.remove(t),null}},set(t,e,s=!1){const a=`${v}${t}`,i={data:e,timestamp:Date.now(),expires:s?3600:600};localStorage.setItem(a,JSON.stringify(i)),this.cleanup()},remove(t){localStorage.removeItem(`${v}${t}`)},cleanup(){const t=Object.keys(localStorage).filter((t=>t.startsWith(v)));t.forEach((t=>{const e=localStorage.getItem(t);try{const s=JSON.parse(e);Date.now()>s.timestamp+1e3*s.expires&&localStorage.removeItem(t)}catch(s){localStorage.removeItem(t)}}));const e=Object.keys(localStorage).filter((t=>t.startsWith(v)));e.length>j&&e.map((t=>({key:t,timestamp:JSON.parse(localStorage.getItem(t)).timestamp}))).sort(((t,e)=>t.timestamp-e.timestamp)).slice(0,e.length-j).forEach((t=>localStorage.removeItem(t.key)))},clearAll(){Object.keys(localStorage).filter((t=>t.startsWith(v))).forEach((t=>localStorage.removeItem(t)))}},p={name:"WeatherForecast",data(){return{selectedLocation:"1850147",showCacheStatus:!0,forceRefresh:!1,locations:[{id:"1850147",name:"東京都"},{id:"1853909",name:"大阪市"},{id:"1856057",name:"名古屋市"},{id:"2128295",name:"札幌市"},{id:"1863958",name:"福岡県"},{id:"1848354",name:"横浜市"},{id:"1863967",name:"福岡市"},{id:"1857910",name:"京都市"},{id:"1859171",name:"神戸市"},{id:"1862415",name:"広島市"},{id:"2111149",name:"仙台"}],currentWeather:null,hourlyForecast:[],isLoading:!0,skeletonCount:8}},mounted(){this.fetchWeatherData()},computed:{cacheAge(){const t=f.get(this.selectedLocation);return t?Math.floor((Date.now()-1e3*t.dt)/6e4):0},isUsingCache(){return this.cacheAge>0&&!this.forceRefresh}},methods:{async fetchWeatherData(){const t=f.get(this.selectedLocation);if(t&&!this.forceRefresh)return this.currentWeather=t,this.showMessage("使用缓存数据"),void(this.isLoading=!1);try{this.isLoading=!0;const[t,e]=await Promise.all([u.get("/weather",{params:{id:this.selectedLocation}}),u.get("/forecast",{params:{id:this.selectedLocation}})]);this.currentWeather=t.data,this.hourlyForecast=e.data.list.slice(0,8),f.set(this.selectedLocation,t.data),f.set(`${this.selectedLocation}_forecast`,e.data,!0)}catch(e){console.error("获取天气失败:",e);const t=f.get(this.selectedLocation);t?(this.currentWeather=t,this.showWarning("实时数据获取失败，使用缓存数据")):this.showError("获取天气数据失败")}finally{this.isLoading=!1,this.forceRefresh=!1}},refreshData(){this.forceRefresh=!0,this.fetchWeatherData()},showMessage(t){this.message=t,this.messageType="info",this.clearMessageAfterDelay()},showWarning(t){this.message=t,this.messageType="warning",this.clearMessageAfterDelay()},showError(t){this.message=t,this.messageType="error",this.clearMessageAfterDelay()},clearMessageAfterDelay(){this.messageTimeout&&clearTimeout(this.messageTimeout),this.messageTimeout=setTimeout((()=>{this.message=""}),3e3)},getWeatherIcon(t){return`https://openweathermap.org/img/wn/${t}@2x.png`},formatTime(t,e="YYYY-MM-DD HH:mm"){return m().unix(t).format(e)}}},g=p,_=s(1656),C=(0,_.A)(g,n,o,!1,null,"6b5e337d",null),y=C.exports,b={name:"App",components:{WeatherForecast:y}},k=b,w=(0,_.A)(k,i,r,!1,null,null,null),W=w.exports;a.Ay.config.productionTip=!1,new a.Ay({render:t=>t(W)}).$mount("#app")},5358:function(t,e,s){var a={"./af":54,"./af.js":54,"./ar":8650,"./ar-dz":3137,"./ar-dz.js":3137,"./ar-kw":9825,"./ar-kw.js":9825,"./ar-ly":4800,"./ar-ly.js":4800,"./ar-ma":7521,"./ar-ma.js":7521,"./ar-ps":1854,"./ar-ps.js":1854,"./ar-sa":9747,"./ar-sa.js":9747,"./ar-tn":6093,"./ar-tn.js":6093,"./ar.js":8650,"./az":1125,"./az.js":1125,"./be":1844,"./be.js":1844,"./bg":4238,"./bg.js":4238,"./bm":5452,"./bm.js":5452,"./bn":9877,"./bn-bd":4728,"./bn-bd.js":4728,"./bn.js":9877,"./bo":9158,"./bo.js":9158,"./br":3601,"./br.js":3601,"./bs":9698,"./bs.js":9698,"./ca":4225,"./ca.js":4225,"./cs":5247,"./cs.js":5247,"./cv":3508,"./cv.js":3508,"./cy":7065,"./cy.js":7065,"./da":3002,"./da.js":3002,"./de":7046,"./de-at":2662,"./de-at.js":2662,"./de-ch":640,"./de-ch.js":640,"./de.js":7046,"./dv":3155,"./dv.js":3155,"./el":9296,"./el.js":9296,"./en-au":9441,"./en-au.js":9441,"./en-ca":2659,"./en-ca.js":2659,"./en-gb":1106,"./en-gb.js":1106,"./en-ie":7625,"./en-ie.js":7625,"./en-il":7794,"./en-il.js":7794,"./en-in":5176,"./en-in.js":5176,"./en-nz":2379,"./en-nz.js":2379,"./en-sg":3625,"./en-sg.js":3625,"./eo":297,"./eo.js":297,"./es":653,"./es-do":763,"./es-do.js":763,"./es-mx":7975,"./es-mx.js":7975,"./es-us":5082,"./es-us.js":5082,"./es.js":653,"./et":8216,"./et.js":8216,"./eu":1375,"./eu.js":1375,"./fa":1132,"./fa.js":1132,"./fi":1460,"./fi.js":1460,"./fil":6074,"./fil.js":6074,"./fo":5602,"./fo.js":5602,"./fr":7957,"./fr-ca":3786,"./fr-ca.js":3786,"./fr-ch":273,"./fr-ch.js":273,"./fr.js":7957,"./fy":4100,"./fy.js":4100,"./ga":1205,"./ga.js":1205,"./gd":4730,"./gd.js":4730,"./gl":5938,"./gl.js":5938,"./gom-deva":2523,"./gom-deva.js":2523,"./gom-latn":9676,"./gom-latn.js":9676,"./gu":8697,"./gu.js":8697,"./he":9426,"./he.js":9426,"./hi":1830,"./hi.js":1830,"./hr":5611,"./hr.js":5611,"./hu":2178,"./hu.js":2178,"./hy-am":3117,"./hy-am.js":3117,"./id":9588,"./id.js":9588,"./is":305,"./is.js":305,"./it":5236,"./it-ch":9854,"./it-ch.js":9854,"./it.js":5236,"./ja":1296,"./ja.js":1296,"./jv":7669,"./jv.js":7669,"./ka":2729,"./ka.js":2729,"./kk":911,"./kk.js":911,"./km":6509,"./km.js":6509,"./kn":5092,"./kn.js":5092,"./ko":2091,"./ko.js":2091,"./ku":2709,"./ku-kmr":9294,"./ku-kmr.js":9294,"./ku.js":2709,"./ky":5329,"./ky.js":5329,"./lb":6255,"./lb.js":6255,"./lo":7084,"./lo.js":7084,"./lt":2013,"./lt.js":2013,"./lv":3419,"./lv.js":3419,"./me":4759,"./me.js":4759,"./mi":4331,"./mi.js":4331,"./mk":618,"./mk.js":618,"./ml":8888,"./ml.js":8888,"./mn":4325,"./mn.js":4325,"./mr":2518,"./mr.js":2518,"./ms":261,"./ms-my":7144,"./ms-my.js":7144,"./ms.js":261,"./mt":8048,"./mt.js":8048,"./my":2539,"./my.js":2539,"./nb":7005,"./nb.js":7005,"./ne":6152,"./ne.js":6152,"./nl":999,"./nl-be":2185,"./nl-be.js":2185,"./nl.js":999,"./nn":2329,"./nn.js":2329,"./oc-lnc":5673,"./oc-lnc.js":5673,"./pa-in":7820,"./pa-in.js":7820,"./pl":9265,"./pl.js":9265,"./pt":9577,"./pt-br":9202,"./pt-br.js":9202,"./pt.js":9577,"./ro":2710,"./ro.js":2710,"./ru":3924,"./ru.js":3924,"./sd":7406,"./sd.js":7406,"./se":8109,"./se.js":8109,"./si":7081,"./si.js":7081,"./sk":8279,"./sk.js":8279,"./sl":8598,"./sl.js":8598,"./sq":65,"./sq.js":65,"./sr":1320,"./sr-cyrl":9591,"./sr-cyrl.js":9591,"./sr.js":1320,"./ss":5935,"./ss.js":5935,"./sv":2468,"./sv.js":2468,"./sw":411,"./sw.js":411,"./ta":3354,"./ta.js":3354,"./te":9926,"./te.js":9926,"./tet":4424,"./tet.js":4424,"./tg":2108,"./tg.js":2108,"./th":8577,"./th.js":8577,"./tk":2232,"./tk.js":2232,"./tl-ph":1494,"./tl-ph.js":1494,"./tlh":7353,"./tlh.js":7353,"./tr":8871,"./tr.js":8871,"./tzl":8363,"./tzl.js":8363,"./tzm":1364,"./tzm-latn":2268,"./tzm-latn.js":2268,"./tzm.js":1364,"./ug-cn":7279,"./ug-cn.js":7279,"./uk":6869,"./uk.js":6869,"./ur":4926,"./ur.js":4926,"./uz":8150,"./uz-latn":2670,"./uz-latn.js":2670,"./uz.js":8150,"./vi":9940,"./vi.js":9940,"./x-pseudo":6507,"./x-pseudo.js":6507,"./yo":7893,"./yo.js":7893,"./zh-cn":7849,"./zh-cn.js":7849,"./zh-hk":1381,"./zh-hk.js":1381,"./zh-mo":6440,"./zh-mo.js":6440,"./zh-tw":9613,"./zh-tw.js":9613};function i(t){var e=r(t);return s(e)}function r(t){if(!s.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}i.keys=function(){return Object.keys(a)},i.resolve=r,t.exports=i,i.id=5358}},e={};function s(a){var i=e[a];if(void 0!==i)return i.exports;var r=e[a]={id:a,loaded:!1,exports:{}};return t[a].call(r.exports,r,r.exports,s),r.loaded=!0,r.exports}s.m=t,function(){var t=[];s.O=function(e,a,i,r){if(!a){var n=1/0;for(d=0;d<t.length;d++){a=t[d][0],i=t[d][1],r=t[d][2];for(var o=!0,c=0;c<a.length;c++)(!1&r||n>=r)&&Object.keys(s.O).every((function(t){return s.O[t](a[c])}))?a.splice(c--,1):(o=!1,r<n&&(n=r));if(o){t.splice(d--,1);var l=i();void 0!==l&&(e=l)}}return e}r=r||0;for(var d=t.length;d>0&&t[d-1][2]>r;d--)t[d]=t[d-1];t[d]=[a,i,r]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={524:0};s.O.j=function(e){return 0===t[e]};var e=function(e,a){var i,r,n=a[0],o=a[1],c=a[2],l=0;if(n.some((function(e){return 0!==t[e]}))){for(i in o)s.o(o,i)&&(s.m[i]=o[i]);if(c)var d=c(s)}for(e&&e(a);l<n.length;l++)r=n[l],s.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return s.O(d)},a=self["webpackChunkweather_app"]=self["webpackChunkweather_app"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],(function(){return s(1002)}));a=s.O(a)})();
//# sourceMappingURL=app.2b212d41.js.map